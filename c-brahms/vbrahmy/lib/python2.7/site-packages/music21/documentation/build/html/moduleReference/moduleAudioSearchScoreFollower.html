<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>music21.audioSearch.scoreFollower &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Module Reference" href="index.html" />
    <link rel="next" title="music21.audioSearch.transcriber" href="moduleAudioSearchTranscriber.html" />
    <link rel="prev" title="music21.audioSearch.recording" href="moduleAudioSearchRecording.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleAudioSearchTranscriber.html" title="music21.audioSearch.transcriber"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="moduleAudioSearchRecording.html" title="music21.audioSearch.recording"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Module Reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="moduleAudioSearchRecording.html"
                        title="previous chapter">music21.audioSearch.recording</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="moduleAudioSearchTranscriber.html"
                        title="next chapter">music21.audioSearch.transcriber</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">music21.audioSearch.scoreFollower</a><ul>
<li><a class="reference internal" href="#scorefollower">ScoreFollower</a></li>
</ul>
</li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">User&#8217;s Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/moduleReference/moduleAudioSearchScoreFollower.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="music21-audiosearch-scorefollower">
<span id="moduleaudiosearchscorefollower"></span><h1>music21.audioSearch.scoreFollower<a class="headerlink" href="#music21-audiosearch-scorefollower" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-music21.audioSearch.scoreFollower"></span><div class="section" id="scorefollower">
<h2>ScoreFollower<a class="headerlink" href="#scorefollower" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower">
<em class="property">class </em><code class="descclassname">music21.audioSearch.scoreFollower.</code><code class="descname">ScoreFollower</code><span class="sig-paren">(</span><em>scoreStream=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric"><a class="reference internal" href="#music21.audioSearch.scoreFollower.ScoreFollower" title="music21.audioSearch.scoreFollower.ScoreFollower"><code class="xref py py-class docutils literal"><span class="pre">ScoreFollower</span></code></a> methods</p>
<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.getFirstSlotOnScreen">
<code class="descclassname">ScoreFollower.</code><code class="descname">getFirstSlotOnScreen</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.getFirstSlotOnScreen" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the index of the first element on the screen right now.</p>
<p>Doesn&#8217;t work. (maybe it&#8217;s not necessary)</p>
</dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.matchingNotes">
<code class="descclassname">ScoreFollower.</code><code class="descname">matchingNotes</code><span class="sig-paren">(</span><em>scoreStream</em>, <em>transcribedScore</em>, <em>notePrediction</em>, <em>lastNotePosition</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.matchingNotes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.predictNextNotePosition">
<code class="descclassname">ScoreFollower.</code><code class="descname">predictNextNotePosition</code><span class="sig-paren">(</span><em>totalLengthPeriod</em>, <em>totalSeconds</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.predictNextNotePosition" title="Permalink to this definition">¶</a></dt>
<dd><p>It predicts the position in which the first note of the following
recording note should start, taking into account the processing time of
the computer.  It has two inputs: totalLengthPeriod, that is the number
of pulses or beats in the recorded audio, and totalSeconds, that is the
length in seconds of the processing time.</p>
<p>It returns a number with the position of the predicted note in the
score.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.audioSearch</span> <span class="kn">import</span> <span class="n">scoreFollower</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scNotes</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;luca/gloria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">scoreNotesOnly</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">scoreStream</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notesAndRests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalSeconds</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predictedStartPosition</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">predictNextNotePosition</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">totalSeconds</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">predictedStartPosition</span><span class="p">)</span>
<span class="go">18</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.repeatTranscription">
<code class="descclassname">ScoreFollower.</code><code class="descname">repeatTranscription</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.repeatTranscription" title="Permalink to this definition">¶</a></dt>
<dd><p>First, it records from the microphone (or from a file if is used for
test). Later, it processes the signal in order to detect the pitches.
It converts them into music21 objects and compares them with the score.
It finds the best matching position of the recorded signal with the
score, and decides, depending on matching accuracy, the last note
predicted and some other parameters, in which position the recorded
signal is.</p>
<p>It returns a value that is False if the song has not finished, or true
if there has been a problem like some consecutive bad matchings or the
score has finished.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.audioSearch</span> <span class="kn">import</span> <span class="n">scoreFollower</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scoreNotes</span> <span class="o">=</span> <span class="s">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s">&quot;c4&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&#39;&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="s">&quot;c&#39;&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="s">&quot;c#&quot;</span><span class="p">,</span> <span class="s">&quot;d#&quot;</span><span class="p">,</span> <span class="s">&quot;f#&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="s">&quot;c&#39;&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="s">&quot;c#&quot;</span><span class="p">,</span> <span class="s">&quot;d#&quot;</span><span class="p">,</span> <span class="s">&quot;f#&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scNotes</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&quot;tinynotation: 4/4 &quot;</span> <span class="o">+</span> <span class="n">scoreNotes</span><span class="p">,</span> <span class="n">makeNotation</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">useMic</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">waveFile</span> <span class="o">=</span> <span class="s">&#39;test_audio.wav&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">useScale</span> <span class="o">=</span> <span class="n">scale</span><span class="o">.</span><span class="n">ChromaticScale</span><span class="p">(</span><span class="s">&#39;C4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">currentSample</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">repeatTranscription</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">exitType</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.runScoreFollower">
<code class="descclassname">ScoreFollower.</code><code class="descname">runScoreFollower</code><span class="sig-paren">(</span><em>plot=False</em>, <em>useMic=False</em>, <em>seconds=15.0</em>, <em>useScale=None</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.runScoreFollower" title="Permalink to this definition">¶</a></dt>
<dd><p>The main program. It runs the &#8216;repeatTranscription&#8217; until the
performance ends.</p>
<p>If <cite>useScale</cite> is none, then it uses a scale.ChromaticScale</p>
</dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.silencePeriodDetection">
<code class="descclassname">ScoreFollower.</code><code class="descname">silencePeriodDetection</code><span class="sig-paren">(</span><em>notesList</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.silencePeriodDetection" title="Permalink to this definition">¶</a></dt>
<dd><p>Detection of consecutive periods of silence.
Useful if the musician has some consecutive measures of silence.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.audioSearch</span> <span class="kn">import</span> <span class="n">scoreFollower</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scNotes</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;luca/gloria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notesList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">notesCounter</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodCounter</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodDetection</span><span class="p">(</span><span class="n">notesList</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">notesCounter</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodCounter</span>
<span class="go">1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notesList</span> <span class="o">=</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notesList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">notesCounter</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodCounter</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodDetection</span><span class="p">(</span><span class="n">notesList</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">notesCounter</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">silencePeriodCounter</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="music21.audioSearch.scoreFollower.ScoreFollower.updatePosition">
<code class="descclassname">ScoreFollower.</code><code class="descname">updatePosition</code><span class="sig-paren">(</span><em>prob</em>, <em>totalLengthPeriod</em>, <em>time_start</em><span class="sig-paren">)</span><a class="headerlink" href="#music21.audioSearch.scoreFollower.ScoreFollower.updatePosition" title="Permalink to this definition">¶</a></dt>
<dd><p>It updates the position in which the scoreFollower starts to search at,
and the predicted position in which the new fragment of the score
should start.  It updates these positions taking into account the value
of the &#8220;countdown&#8221;, and if is the beginning of the song or not.</p>
<p>It returns the exitType, which determines whether the scoreFollower has
to stop (and why) or not.</p>
<p>See example of a bad prediction at the beginning of the song:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21.audioSearch</span> <span class="kn">import</span> <span class="n">scoreFollower</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scNotes</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;luca/gloria&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c"># bad prediction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Different examples for different countdowns:</p>
<p>Countdown = 0:</p>
<p>The last matching was good, so it calculates the position in which it
starts to search at, and the position in which the music should start.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">scoreNotesOnly</span> <span class="o">=</span> <span class="n">scNotes</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">notesAndRests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">38</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span><span class="p">)</span>
<span class="go">38</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">&gt;=</span><span class="mi">38</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Countdown = 1:</p>
<p>Now it doesn&#8217;t change the slot in which it starts to search at.
It also predicts the position in which the music should start.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">&gt;</span> <span class="mi">15</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Countdown = 2:</p>
<p>Now it starts searching at the beginning of the page of the screen.
The note prediction is also the beginning of the page.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span><span class="p">)</span>
<span class="go">39</span>
</pre></div>
</div>
<p>Countdown = 4:</p>
<p>Now it starts searching at the beginning of the page of the screen.
The note prediction is also the beginning of the page.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Countdown = 5:</p>
<p>Now it stops the program.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span> <span class="o">=</span> <span class="n">scoreFollower</span><span class="o">.</span><span class="n">ScoreFollower</span><span class="p">(</span><span class="n">scoreStream</span><span class="o">=</span><span class="n">scNotes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">begins</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">countdown</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">startSearchAtSlot</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">lastNotePosition</span> <span class="o">=</span> <span class="mi">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">predictedNotePosition</span> <span class="o">=</span> <span class="mi">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ScF</span><span class="o">.</span><span class="n">seconds_recording</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prob</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">totalLengthPeriod</span> <span class="o">=</span> <span class="mi">25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exitType</span> <span class="o">=</span> <span class="n">ScF</span><span class="o">.</span><span class="n">updatePosition</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span> <span class="n">totalLengthPeriod</span><span class="p">,</span> <span class="n">time_start</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">exitType</span><span class="p">)</span>
<span class="go">countdownExceeded</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="moduleAudioSearchTranscriber.html" title="music21.audioSearch.transcriber"
             >next</a> |</li>
        <li class="right" >
          <a href="moduleAudioSearchRecording.html" title="music21.audioSearch.recording"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">music21</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Module Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2015, Michael Scott Cuthbert and cuthbertLab.
      Last updated on Sep 28, 2015.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>